# 这是什么玩意儿？

这是本人写的Windows下vim的自动配置C/C++开发环境的bat脚本，只提供补全和自动匹配（括号引号等）功能。补全由vim插件coc.nvim提供，自动匹配由vim插件auto-pairs提供。目的是提供一种傻瓜方式，以在vim基础上配置轻量的C/C++开发环境

# 适合你使用吗？
目前来看，只适合我自己使用。不过我当然希望其他人也可以尝试一下，比如在大学刚学习C/C++的同学。像visual studio这样的重量级ide太大了。而且一般的开发环境会将诸多细节隐藏起来，很容易让初学者感到困惑。我当初刚学习C++时，学了一个学期依然不知道我写的程序到底是什么个东西。而像vim这样的纯编辑器将所有细节暴露出来，我们脑子里的想法变成一个软件的过程变得清清楚楚。

# 需要哪些依赖？

- __msys2__ <br>提供编译器，git等必备环境
- __node.js__ <br>coc.nvim需要
- __vim__ <br>这是当然需要的，但没有也能顺利安装

# 如何使用？
__本脚本仅在目前应用最新版本上测试成功（Windows10、msys20220603、gvim9.0、nodejs10.6.0），如无必要，你也应当使用这些版本的依赖。__

1. 首先下载安装上述依赖<cr>
国内镜像源：<br>
[msys2](https://mirrors.ustc.edu.cn/msys2/distrib/msys2-x86_64-latest.exe)<br>
[vim](https://mirrors.ustc.edu.cn/vim/pc/gvim90.exe)<br>
[nodejs](https://mirrors.ustc.edu.cn/node/latest/node-v18.6.0-x64.msi)<br>
直接点击即可下载，安装过程不多赘述，基本上一直点下一步就行。
2. 设置path环境变量<br>
  >path环境变量是Windows的搜索路径。将一个目录加入path，就可以在cmd中直接运行该目录下的可执行文件，不过这些都不重要，重要的是我们的脚本需要它顺利运行<br>
  
  - 按win+i打开设置，依次点击系统、关于、高级系统设置、环境变量、path<br>
  - 按新建，可以直接输入路径也可以点浏览找到所需路径
  - 按上述方式将下列路径加入环境变量
    - msys2安装目录\mingw64\bin
    - msys2安装目录\usr\bin
    - C:\User\%username%\ccls\Release 这个是脚本ccls安装位置，如果你需要，可以放其他位置，并修改脚本
  - 然后无脑一直点确定就可以了
  
3. 将该脚本下载下来<br>
  你都到这里了，怎么下载应该不用教吧
  
4. 双击该脚本，就是现在！让它帮你自动完成配置
  
# 到底做了什么？
  你可以对该脚本右键编辑自己查看，不过我想大部分人都没有这个耐心。
  1. 脚本首先更新了msys2并用pacman安装了必要的clang，cmake，git等程序。
  2. git将我们需要的coc.nvim、auto-pairs克隆到vim的pack目录。将ccls源码克隆到用户目录。nodejs的npm安装yarn并编译coc.nvim，编译安装ccls
  3. 配置coc.nvim使用ccls lsp，配置从ccls github负制过来的。配置_vimrc，就加载了默认配置文件，设置了下字体
  
# 使用这些配置的理由？
  msys2：主要是它的操作和Linux很像，利用包管理器可以很方便下载各种需要的工具。
  
  auto-pairs：大多数编辑器都自带括号匹配功能，但vim默认不支持。反正这插件安装方便，而且使用体验不错，就装上了。
  
  coc.nvim：我觉得对于初学者来说，最重要的是语义补全功能。之前我都是在arch Linux上用archlinuxcn的youcompleteme包，非常方便而且强大。但是一旦换其他平台就难以安装，我至今没有在其他平台上安装成功过。我觉得应该使用一些更为现代的方法。coc.nvim和lsp早有耳闻。但是由于github访问的原因，时常半途而费，导致我觉得coc.nvim是和ycm一样难以安装的东西。不过一次成功后，我很快发现它的安装并没有想象中的那么困难而且使用很方便。
  
  ccls：lsp我之前只听说过clangd，clangd的安装要更为方便，事实上我们已经顺带安装了clangd，但是尝试ccls后，我发现它比clangd更智能。多耗费的时间我觉得是值得的。
  # 怎么退出vim？
  其实Windows下的gvim给出了很多方便的功能，可以只使用gvim easy，再结合自带工具栏就可以完成大部分操作了，至少可以比得上带补全的记事本。上手gvim仿佛不是很困难了。但了解一下原生vim风味我觉得还是有必要的，你不想安装了gvim却使用带补全的记事本吧。<br>
  以下搜索引擎上其实都能找得到，大同小异
  - 在某个文件夹下新建文本文件，右键重命名为a，文件后缀改为c，即重命名为a.c，如果看不到文件后缀，win+e打开资源管理器，点查看，勾选显示/隐藏中的文件扩展名
- 右键a.c用vim编辑
- vim有不同的模式，在刚打开vim时，vim处在normal模式，此时是编辑不了文本的。为避免生成随机字符串，不要乱按。如果你已经按了，按\<esc>键，多按几下，可以保证处于normal模式之下
- 在normal模式下按i键，可以切换到insert模式。此时你可以像其他编辑器一样编辑文本。
- 在insert模式下编辑完成后，按\<esc>回到normal模式，不确定就多按几下。
- 在normal模式下输入英文的冒号(就是它':')，可以进入命令模式。可以在左下角看到一个冒号，本段所有操作都要确保在命令模式下。你可以输入命令回车执行相应功能并回到normal模式。w命令可保存当前文件，如果你之前没有指定文件名，使用'w 文件名'命令。命令q可以在已保存情况下退出。w!强制保存，q!强制退出（多用于编辑了文件但是不想保存直接退出情况）。wq保存并退出
- 先保存编辑好的a.c，命令模式下使用term命令打开cmd终端，输入gcc a.c并回车，再输入a.exe回车即可运行编译好的可执行文件

知道这些后就可以上手用vim写代码了。但是vim并不只局限于此。它足够高效，不然怎么叫编辑器之神呢。<br>
刚刚使用vim时可能非常需要搜索引擎，但时间长了就会发现搜到的都是些抄来抄去的老旧文章。如果要学到真东西，必须看vim的官方文档（help命令），可以网上找找中文翻译<br>
在vim安装目录下有个vimtutor脚本，使用它可以学到很多基本的使用方式。